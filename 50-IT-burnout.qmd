# Burnout

The subreddit r/sysadmin has a section on the FAQ for professional burnout.

Lots of posts from professional technologists about being burned out and the rants as to why.

Can NLP pluck out the most common causes of burnout from these rants?

From Shannon Stefl's dissertation:
> A psychological construct often examined in faculty well-being research is burnout, which has been extensively studied for decades with much work centered around the faculty profession (Goodman & Schorling, 2012; Kavanagh & Spiro, 2018; Luken & Sammons, 2016; Sabagh, Hall, & Saroyan, 2018; Shanafelt et al., 2009; Singh, Mishra, & Kim, 1998; Skaalvik & Skaalvik, 2007). For example, Sabagh et al. (2018, p. 132) explain that “burnout is a state of physical, emotional and mental exhaustion resulting from a prolonged response to long-term exposure to demanding situations,” and that modern faculty experience high levels of this burnout. In their review of literature on faculty burnout, these scholars reveal that over the last few decades faculty performance and productivity expectations have steadily risen and have resulted in increased psychological challenges that threatened faculty well-being. They reported that increased workload demands and conflict between roles contributed to psychological distress and feelings of burnout, and that burnout was consistently and negatively correlated with job satisfaction as well as psychological and physical well-being (Sabagh et al., 2018).

Luken, M., & Sammons, A. (2016). Systematic review of mindfulness practice for
reducing job burnout. American Journal of Occupational Therapy, 70(2),
7002250020p1-7002250020p10.

# Getting data

## python pmas

```{python}
from pmaw import PushshiftAPI
api = PushshiftAPI()
posts = api.search_submissions(subreddit="sysadmin", limit=100, q="burn")
post_list = [post for post in posts]

import jsonlines
with jsonlines.open('data/burnout_posts.json', mode='w') as writer:
  writer.write(post_list)
```


## sparklyr

```{r}
knitr::opts_chunk$set(echo = TRUE, tidy = TRUE, eval = FALSE, cache.path = "cache/")
knitr::read_chunk("globals.R")
# source('globals.R')
library(kableExtra)
library(tidyverse)
library(formatR)
set.seed(13) # lets get rid of some randomization with the luckiest number

```

### Setting up spark

```{r spark setup, eval=FALSE}
Sys.setenv(SPARK_HOME = "/software/external/spark/3.3.1")
Sys.setenv(JAVA_HOME = "/software/spackages/linux-rocky8-x86_64/gcc-9.5.0/openjdk-11.0.15_10-xo4fjahmlsjch52sftpoxby6kwbdfoib")
library(sparklyr)

options(sparklyr.log.console = TRUE)
config <- spark_config()
config["sparklyr.shell.driver-memory"] <- "10g"
config["spark.executor.memory"] <- "15G" # typically 4g

spark_master_info <- Sys.getenv("RSESSION_LOG_FILE") %>%
  dirname() %>%
  paste0("/spark_master.info") %>%
  readLines(n = 1)

# master node needs to be modified with each new job
sc <- spark_connect(master = spark_master_info, config = config)
```

```{r pull comments function def}
pull_comments_of_subreddit <- function(years = c(2014, 2014, 2016, 2017),
                                       sr = "python",
                                       write_to_dir = FALSE) {
  for (year in years) {
    year_dir <- paste0("/scratch1/tsranso/reddit/comments/", year)
    comments <- spark_read_json(sc, path = year_dir, memory = FALSE) %>%
      filter(subreddit %in% c(sr) & selftext != "") %>%
      mutate(selftext = regexp_replace(selftext, "\\n|&nbsp;|<[^>]*>|[^A-Za-z|']", " ")) %>%
      mutate(selftext = str_trim(selftext)) %>%
      filter(!selftext %in% c("", "deleted", "title", "removed"))

    if (write_to_dir) {
      output_directory <- paste0("/scratch1/tsranso/reddit/subreddit-comments/", sr, "/", year)
      message("Writing filtered comment data to: ", output_directory)
      spark_write_json(comments, path = output_directory, mode = "overwrite")
    }
  }

  return(posts)
}
```



# Basic data stats

```{r}
library(tidyverse)
library(lubridate)
library(tidyjson)
library(pushshiftR)
library(tidytext)

burn_posts <- pushshiftR::getPushshiftData(postType = "submission",
                 size = 100,
                 q = "burnout",
                 subreddit = "sysadmin",
                 nest_level = 1)
sbp <- burn_posts
burn_posts <- sbp

burn_posts %<>% select(author, link_flair_text, title, selftext, score, created_utc) %>%
  mutate(date = as_datetime(created_utc), created_utc = NULL) %>%
  mutate(selftext = str_to_lower(str_remove_all(selftext, "[,:_]"))) %>%
  separate_longer_delim(cols = selftext, delim = "\n\n") %>%
  filter(selftext != "&amp;#x200b;" & selftext != "[deleted]" & selftext != "")
```

# Topic modeling

```{r}
comments <- spark_read_json(sc, path = "/fastscratch/tsranso/reddit/subreddits/comments/sysadmin_comments", memory = FALSE)

burnout_comments <- comments %>% select(author, score, body, id, parent_id, created) %>%
  filter(body != "[deteled]" & body != "[removed]" & body != "") %>%
  mutate(body = str_to_lower(body)) %>% filter(instr(body, "burnout") > 0)


posts <- spark_read_json(sc, path = "/fastscratch/tsranso/reddit/subreddits/submissions/sysadmin_submissions", memory = FALSE)

burnout_posts <- posts %>%
  select(author, link_flair_text, title, selftext, score, created, view_count,
         num_comments, num_crossposts, num_reports, id) %>%
  filter(selftext != "[deleted]" & selftext != "[removed]" &
           selftext != "") %>%
  mutate(selftext = str_to_lower(selftext)) %>%
  filter(instr(selftext, "burnout") > 0 |
           instr(selftext, "burnt out") > 0 |
           instr(selftext, "burning out") > 0 |
           instr(selftext, "burn out") > 0)
#View(collect(burnout_posts))

rant_posts <- posts %>%
  select(author, link_flair_text, title, selftext, score, created, view_count,
         num_comments, num_crossposts, num_reports) %>%
  filter(selftext != "[deleted]" & selftext != "[removed]" &
           selftext != "" & link_flair_text == "Rant") %>%
  mutate(selftext = str_to_lower(selftext))
```


# Quantitative ethnography

```{r}
library(ncodeR)

code.emotions.negative <- create.code(
  name = "Negative Emotions",
  definition = "Any bad/draining feelings",
  expressions = c("depression", "anger", "sad", "fear", "hostile"),
  excerpts = burnout_posts$selftext)
code.emotions.negative <- handcode(code = code.emotions.negative,
                                  excerpts = burn_posts$selftext, n = 4, unseen = TRUE)
code.emotions.negative <- test(code = code.emotions.negative, kappa_threshold = 0.65)



code.emotions.positive <- create.code(
  name = "Positive Emotions",
  definition = "Any good/uplifting feelings",
  expressions = c("happy", "proud", "trust", "optimistic"),
  excerpts = burnout_posts$selftext)

code.duties <- create.code(
  name = "Professional duties",
  definition = "Anything related to professional expectations",
  expressions = c("expected", "manage", "program", "ticket", "call", "on call", "work", "project", "server", "work"),
  excerpts = burnout_posts$selftext)

code.team <- create.code(
  name = "Team members",
  definition = "References to other individuals working with the individual",
  expressions = c("manager", "team lead", "tech", "management"),
  excerpts = burnout_posts$selftext)

code.users <- create.code(
  name = "Users",
  definition = "References to individuals who are receiving tech support",
  expressions = c("users", "higher ups", "ceo"),
  excerpts = burnout_posts$selftext)

code.company <- create.code(
  name = "Company culture and policies",
  definition = "Official policies or unofficial corporate culture",
  excerpts = burnout_posts$selftext)

```
